
<p-card  class="m-2">
    <div class="row">
    <div class="form-group col-6">
        <label for="modelServSpec">Sh.Text:</label>
        <div class="input-group">
            <input id="modelServSpec" name="modelServSpec" required type="text" class="form-control" ngModel>
        </div>
    </div>
  
    <div class="form-group col-4">
        <label for="blockingIndicator">TotalValue:</label>
        <div class="input-group">
           calculated
        </div>
    </div>
    <div class="form-group col-2">
        <label for="blockingIndicator">UOM:</label>
        <div class="input-group">
            Retrieved
            <!-- <input id="blockingIndicator" name="blockingIndicator" type="checkbox" ngModel> -->
        </div>
    </div>
</div>
</p-card>
<p-card  class="m-2">
    <ng-template pTemplate="right">
        <button pButton label="Create" size="small" icon="pi pi-plus"  class="m-2"></button>
         <!-- <button pButton label="Edit" (click)="navigateAddServices()" [disabled]="!isEditButtonDisabled" class="m-2 edit-button"></button>  -->
         <button pButton label="Edit" size="small"  class="m-2 edit-button"></button> 
         <button pButton pRipple icon="pi pi-copy" class="p-button-rounded m-2 "
        ></button>
        <button pButton label="Export" size="small"  icon="pi pi-upload" class="m-2"></button>
       
    </ng-template>
</p-card>
<div class="card">
    <p-toast></p-toast>
   
    <p-table [value]="products" dataKey="id" editMode="row" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 4rem">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th fd-table-cell>ID </th>
                <!-- <th fd-table-cell>Selection</th> -->
                <!-- <th fd-table-cell>LineIndex</th> -->
                <th fd-table-cell>Del.Ind</th>
                <th fd-table-cell>Service.No</th>
                <th fd-table-cell>ShortText</th>
                <th fd-table-cell>Quantity</th>
                <th fd-table-cell>UnitOfMeasure</th>
                <th fd-table-cell>GrossPrice</th>
                <th fd-table-cell>Currency</th>
                <th fd-table-cell>OverF.Percentage</th>
                <th fd-table-cell>PriceChangedAllowed</th>
                <th fd-table-cell>UnlimitedOverF</th>
                <th fd-table-cell>PricePerUnitOfMeasurement</th>
                <th fd-table-cell>Mat Group</th>
                <th fd-table-cell>Service Type</th>
                <th fd-table-cell>External.Service.No</th>
                <th fd-table-cell>Net Value</th>
                <th fd-table-cell>Service Text</th>
                <th fd-table-cell>Line Text</th>
                <th fd-table-cell>Line Type</th>
                <!-- <th fd-table-cell>PerNo</th> -->
                <th fd-table-cell>Formula</th>
                <th fd-table-cell>Line Number</th>
                <th fd-table-cell>Alt</th>
                <th fd-table-cell>Bidder's Line</th>
                <th fd-table-cell>Supp.Line</th>
                <th fd-table-cell>Cstg Ls</th>
                <th fd-table-cell>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="product">
                <td>
                    <p-tableCheckbox [value]="product"></p-tableCheckbox>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.id">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.id}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <!-- <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.selectionCheckbox" required> 
                          
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.selectionCheckbox}}
                        </ng-template>
                    </p-cellEditor>
                </td> -->
                <!-- <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <p-dropdown [options]="" appendTo="body" [(ngModel)]="product.inventoryStatus" [style]="{'width':'100%'}"></p-dropdown>
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.inventoryStatus}}
                        </ng-template>
                    </p-cellEditor>
                </td> -->
                <!-- <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.lineIndex">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.lineIndex }}
                        </ng-template>
                    </p-cellEditor>
                </td> -->
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.deletionIndicator">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.deletionIndicator }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    service Number
                </td>

                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.shortText">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.shortText }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.quantity">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.quantity }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    UOM
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.grossPrice">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.grossPrice }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    Currency 
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.overFulfilmentPercentage">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.overFulfilmentPercentage }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.priceChangedAllowed">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.priceChangedAllowed }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.UnlimitedOverFulfilment">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.UnlimitedOverFulfilment }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.pricePerUnitOfMeasurement">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.pricePerUnitOfMeasurement }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    Mat.Grp Retrieved
                </td>
                <td>
                   Service Type 
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.externalServiceNumber">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.externalServiceNumber }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="product.netValue">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.netValue }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    Service Text retrieved
                    <!-- <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.serviceText">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.serviceText }}
                        </ng-template>
                    </p-cellEditor> -->
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.lineText">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.lineText }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    line type dropdown
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.formula">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.formula }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.lineNumber">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.lineNumber }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.alternatives">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.alternatives }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.biddersLine">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.biddersLine }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.supplementaryLine">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.supplementaryLine }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="checkbox" [(ngModel)]="product.lotSizeForCostingIsOne">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.lotSizeForCostingIsOne }}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <div class="flex align-items-center justify-content-center gap-2">
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(product)" class="p-button-rounded p-button-text"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(product.id,product)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(product, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
                    </div>
                </td>
            </tr>
        </ng-template>

        <ng-template pTemplate="footer">
            <tr>
                <td>
                    <p-tableCheckbox [value]="newService"></p-tableCheckbox>
                </td>
                <td>
                    <input pInputText type="number" [(ngModel)]="newService.id">
                </td>
                <td>
                    <input pInputText type="checkbox" [(ngModel)]="newService.deletionIndicator">
        </td>
                <td>
                    <!-- <input pInputText type="checkbox" [(ngModel)]="newService.selectionCheckbox" required> -->
                    <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select Service.No">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
                </td>
                <!-- <td>
                            <input pInputText type="number" [(ngModel)]="newService.lineIndex">
                </td> -->
               
                <td>
                    short text retrieved
                            <!-- <input pInputText type="text" [(ngModel)]="newService.shortText"> -->
                </td>
                <td>
                            <input pInputText type="number" [(ngModel)]="newService.quantity">
                </td>
                <td>
                    <!-- <input pInputText type="checkbox" [(ngModel)]="newService.selectionCheckbox" required> -->
                    <!-- <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select UOM">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown> -->
                uom retrieved
                </td>
                <td>
                            <input pInputText type="number" [(ngModel)]="newService.grossPrice">
                </td>
                <td>
                    <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select Currency">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
                </td>
                <td>
                            <input pInputText type="number" [(ngModel)]="newService.overFulfilmentPercentage">
                </td>
                <td>
                            <input pInputText type="checkbox" [(ngModel)]="newService.priceChangedAllowed">
                </td>
                <td>
                            <input pInputText type="checkbox" [(ngModel)]="newService.UnlimitedOverFulfilment">
                </td>
                <td>
                            <input pInputText type="number" [(ngModel)]="newService.pricePerUnitOfMeasurement">
                </td>
                <td>
                    <!-- <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select Mat.Grp">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown> -->
                Mat.Grp retrieved
                </td>
                <td>
                    <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select ServiceType">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
                </td>
                <td>
                            <input pInputText type="text" [(ngModel)]="newService.externalServiceNumber">
                </td>
                <td>
                            <input pInputText type="number" [(ngModel)]="newService.netValue">
                </td>
                <td>
                    service text retrieved
                            <!-- <input pInputText type="text" [(ngModel)]="newService.serviceText"> -->
                </td>
                <td>
                            <input pInputText type="text" [(ngModel)]="newService.lineText">
                </td>
                <td>
                    <p-dropdown  optionLabel="code"
                    [filter]="true" filterBy="code" [showClear]="true" placeholder="Select LineType">
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2">
                            <div>{{ country.code }}::{{ country.description }}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
                </td>

                <td>
                    formula id retrieved
                            <!-- <input pInputText type="text" [(ngModel)]="newService.formula"> -->
                </td>
                <td>
                            <input pInputText type="text" [(ngModel)]="newService.lineNumber">
                </td>
                <td>
                            <input pInputText type="text" [(ngModel)]="newService.alternatives">
                </td>
                <td>
                            <input pInputText type="checkbox" [(ngModel)]="newService.biddersLine">
                </td>
                <td>
                            <input pInputText type="checkbox" [(ngModel)]="newService.supplementaryLine">
                </td>
                <td>
                            <input pInputText type="checkbox" [(ngModel)]="newService.lotSizeForCostingIsOne">
                     
                </td>
              <!-- <td>
                <p-dropdown [options]="brands" [(ngModel)]="newService.brand" [filter]="true" [filterPlaceholder]="'Search'"
                  [filterBy]="'value'" placeholder="Select Brand"></p-dropdown>
              </td> -->
             
        
              <td>
                <button pButton type="button" icon="pi pi-plus" class="ui-button-info" label="Add" (click)="addRow()"
                  [disabled]="!newService.id || !newService.selectionCheckbox || !newService.shortText"></button>
              </td>
            </tr>
          </ng-template>
    </p-table>
</div>